# ğŸ§  Core Concepts for Terraform & IaC

---

## 1ï¸âƒ£ Infrastructure as Code (IaC)

### ğŸ”¹ What is IaC?

**Infrastructure as Code** means:

* Managing servers, networks, storage, and cloud resources **using code**
* Instead of manually clicking in the cloud portal
* Infrastructure is treated **like software**

---

### ğŸ”¹ Traditional (Manual) vs IaC

#### âŒ Manual (Bad Practice)

* Login to Azure Portal
* Click â†’ Create VM
* Click â†’ Create VNet
* Someone forgets a step
* No history, no rollback

#### âœ… IaC (Best Practice)

* Write Terraform code
* Run `terraform apply`
* Infrastructure created automatically
* Version controlled
* Repeatable anytime

---

### ğŸ”¹ Simple Real-Life Example

Think of:

* **Manual infrastructure** â†’ Cooking without a recipe
* **IaC** â†’ Cooking with a written recipe

ğŸ‘‰ Same result every time ğŸ²

---

### ğŸ”¹ Terraform Example (IaC)

```hcl
resource "azurerm_resource_group" "rg" {
  name     = "rg-dev"
  location = "East US"
}
```

ğŸ‘‰ This code **IS the infrastructure**

---

### ğŸ”¹ Benefits of IaC


âœ” Consistency

âœ” Automation

âœ” Version control

âœ” Faster recovery

âœ” Easy scaling

---

## 2ï¸âƒ£ Declarative vs Imperative

**(VERY IMPORTANT for Terraform)**

---

### ğŸ”¹ Imperative (HOW to do)

You tell the system **step by step** what to do.

Example (imperative thinking):

* Create VM
* Install OS
* Open port 80
* Configure firewall

**Imperative tools:**

* Shell scripts
* Azure CLI
* PowerShell
* Ansible (mostly)

Example:

```bash
az vm create ...
az vm open-port ...
```

ğŸ‘‰ You control **HOW**

---

### ğŸ”¹ Declarative (WHAT you want)

You tell the system **what the final state should be**.
Terraform figures out **HOW** to reach it.

**Declarative tools:**

* Terraform
* ARM
* Bicep
* Kubernetes YAML

---

### ğŸ”¹ Terraform Example (Declarative)

```hcl
resource "azurerm_linux_virtual_machine" "vm" {
  name = "dev-vm"
}
```

You **donâ€™t** say:

* How Azure allocates CPU
* How NIC is created

ğŸ‘‰ Terraform handles it.

---

### ğŸ”¹ Simple Real-Life Example

**Imperative:**
â€œBoil water â†’ add rice â†’ cook 10 minsâ€

**Declarative:**
â€œI want cooked rice ğŸšâ€

---

### ğŸ”¹ Why Terraform is Declarative


âœ” Less error-prone

âœ” Idempotent

âœ” Easier to maintain

---

## 3ï¸âƒ£ Idempotency

**(Most Interviewed Concept)**

---

### ğŸ”¹ What is Idempotency?

Running the **same code multiple times** gives the **same result**, without breaking anything.

---

### ğŸ”¹ Non-Idempotent (Bad)

```bash
run script.sh
run script.sh
```

ğŸ‘‰ Creates duplicate VMs âŒ

---

### ğŸ”¹ Idempotent (Good)

```bash
terraform apply
terraform apply
terraform apply
```

ğŸ‘‰ Result:

* First time â†’ creates infrastructure
* Next time â†’ no changes

---

### ğŸ”¹ Terraform Output Example

```
No changes. Infrastructure is up-to-date.
```

ğŸ‘‰ This is **idempotency**

---

### ğŸ”¹ Why Idempotency Matters


âœ” Safe to rerun code

âœ” Supports automation

âœ” Required for CI/CD

---

### ğŸ”¹ Simple Analogy

Light switch:

* ON â†’ ON â†’ ON
* Still ON
* No damage ğŸ’¡

---

## 4ï¸âƒ£ Immutable Infrastructure

---

### ğŸ”¹ What is Immutable Infrastructure?

Once infrastructure is created, **you do not change it**.
You **replace it with a new version**.

---

### ğŸ”¹ Mutable Infrastructure (Traditional)

* Create VM
* SSH into VM
* Manually install software
* Modify configuration

Problems:


âŒ Configuration drift

âŒ Hard to reproduce

âŒ Risky changes

---

### ğŸ”¹ Immutable Infrastructure (Modern)

* Change Terraform code
* Destroy old VM
* Create new VM with changes

---

### ğŸ”¹ Terraform Example

```hcl
resource "azurerm_linux_virtual_machine" "vm" {
  size = "Standard_B2s"
}
```

Change to:

```hcl
size = "Standard_B4ms"
```

Terraform will:

* Destroy old VM
* Create new VM

---

### ğŸ”¹ Simple Real-Life Example

* **Mutable:** Repair old phone again & again ğŸ“±
* **Immutable:** Buy a new phone with upgrades ğŸ“¦

---

### ğŸ”¹ Benefits of Immutable Infrastructure


âœ” Predictable

âœ” No drift

âœ” Easy rollback

âœ” Safer deployments

---

## ğŸ”— How These Concepts Connect

**(VERY IMPORTANT)**

| Concept     | Terraform Role         |
| ----------- | ---------------------- |
| IaC         | Infrastructure is code |
| Declarative | Define final state     |
| Idempotency | Safe re-execution      |
| Immutable   | Replace, donâ€™t modify  |

ğŸ‘‰ Together, these make Terraform **powerful, safe, and production-ready**

---

## ğŸ¯ Interview-Ready One-Line Answers

* **IaC:** Managing infrastructure using code
* **Declarative:** Define what you want, tool decides how
* **Idempotency:** Same result no matter how many times you run it
* **Immutable infrastructure:** Replace infrastructure instead of modifying it

---
